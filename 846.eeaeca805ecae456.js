"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[846],{9846:(N,h,i)=>{i.r(h),i.d(h,{UsersFormComponent:()=>I});var c=i(177),t=i(9417),b=i(6100),g=i(5779),v=i(1584),y=i(6467),C=i(9998),F=i(491),_=i(1830),E=i(1141),e=i(3953),M=i(1880);const n=["input"],m=(a,f,o)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":a,"p-disabled":f,"p-focus":o}),l={provide:t.kq,useExisting:(0,e.Rfq)(()=>u),multi:!0};let u=(()=>{class a{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new e.bkB;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(o){this.cd=o}onClick(o){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:o,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(o){this.modelValue=o,this.cd.markForCheck()}registerOnChange(o){this.onModelChange=o}registerOnTouched(o){this.onModelTouched=o}setDisabledState(o){this.disabled=o,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(r){return new(r||a)(e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:a,selectors:[["p-inputSwitch"]],viewQuery:function(r,s){if(1&r&&e.GBs(n,5),2&r){let d;e.mGM(d=e.lsd())&&(s.input=d.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",e.Udg],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",e.L39],readonly:[2,"readonly","readonly",e.L39],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",e.L39]},outputs:{onChange:"onChange"},features:[e.Jv_([l]),e.GFd],decls:5,vars:23,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch","pAutoFocus","",3,"focus","blur","checked","disabled","autofocus"],[1,"p-inputswitch-slider"]],template:function(r,s){if(1&r){const d=e.RV6();e.j41(0,"div",1),e.bIt("click",function(S){return e.eBV(d),e.Njj(s.onClick(S))}),e.j41(1,"div",2)(2,"input",3,0),e.bIt("focus",function(){return e.eBV(d),e.Njj(s.onFocus())})("blur",function(){return e.eBV(d),e.Njj(s.onBlur())}),e.k0s()(),e.nrm(4,"span",4),e.k0s()}2&r&&(e.HbH(s.styleClass),e.Y8G("ngClass",e.sMw(19,m,s.checked(),s.disabled,s.focused))("ngStyle",s.style),e.BMQ("data-pc-name","inputswitch")("data-pc-section","root"),e.R7$(),e.BMQ("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("checked",s.checked())("disabled",s.disabled)("autofocus",s.autofocus),e.BMQ("id",s.inputId)("aria-checked",s.checked())("aria-labelledby",s.ariaLabelledBy)("aria-label",s.ariaLabel)("name",s.name)("tabindex",s.tabindex)("data-pc-section","hiddenInput"),e.R7$(2),e.BMQ("data-pc-section","slider"))},dependencies:[c.YU,c.B3,M.q],styles:['@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}\n'],encapsulation:2,changeDetection:0})}return a})(),p=(()=>{class a{static \u0275fac=function(r){return new(r||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[c.MD,M.u]})}return a})();var k=i(8833),T=i(3023);function x(a,f){1&a&&(e.j41(0,"small",37),e.EFF(1,"Firstname is required"),e.k0s())}function O(a,f){1&a&&(e.j41(0,"small",37),e.EFF(1,"Lastname is required"),e.k0s())}function U(a,f){1&a&&(e.j41(0,"span"),e.EFF(1,"Email is required"),e.k0s())}function V(a,f){1&a&&(e.j41(0,"span"),e.EFF(1,"Email is invalid"),e.k0s())}function j(a,f){if(1&a&&(e.j41(0,"small",37),e.DNE(1,U,2,0,"span",38)(2,V,2,0,"span",38),e.k0s()),2&a){const o=e.XpG();e.R7$(),e.Y8G("ngIf",null==o.userForm.email.errors?null:o.userForm.email.errors.required),e.R7$(),e.Y8G("ngIf",null==o.userForm.email.errors?null:o.userForm.email.errors.email)}}function P(a,f){1&a&&(e.j41(0,"small",37),e.EFF(1,"Password is required"),e.k0s())}let I=(()=>{class a{constructor(o,r,s,d,w){this.messageService=o,this.formBuilder=r,this.usersService=s,this.location=d,this.route=w,this.isSubmitted=!1,this.editMode=!1}ngOnInit(){this._initForm(),this._getCountries(),this._checkEditMode()}_initForm(){this.form=this.formBuilder.group({firstName:["",t.k0.required],lastName:["",t.k0.required],password:["",t.k0.required],email:["",[t.k0.required,t.k0.email]],isAdmin:[!1],phone:["",t.k0.required],profilePicture:[""],address:this.formBuilder.group({street:[""],streetNumber:[""],city:[""],zipCode:[""],country:[""]}),credentials:this.formBuilder.group({title:[""],qualifications:[""],licences:[""],company:[""]}),favorites:this.formBuilder.group({favExercises:[""],favPrograms:[""]})})}_getCountries(){y.registerLocale(i(1038)),this.countries=Object.entries(y.getNames("en",{select:"official"})).map(o=>({id:o[0],name:o[1]})),this.countries.sort((o,r)=>o.name.localeCompare(r.name))}_checkEditMode(){this.route.params.subscribe(o=>{o.id&&(this.editMode=!0,this.currentUserId=o.id,this.usersService.getUser(o.id).subscribe(r=>{this.userForm.firstName.setValue(r.firstName),this.userForm.lastName.setValue(r.lastName),this.userForm.email.setValue(r.email),this.userForm.phone.setValue(r.phone),this.userForm.isAdmin.setValue(r.isAdmin),this.userForm.profilePicture.setValue(r.profilePicture),this.form.get("address.street")?.setValue(r.address?.street),this.form.get("address.streetNumber")?.setValue(r.address?.streetNumber),this.form.get("address.city")?.setValue(r.address?.city),this.form.get("address.zipCode")?.setValue(r.address?.zipCode),this.form.get("address.country")?.setValue(r.address?.country),this.userForm.password.setValidators([]),this.userForm.password.updateValueAndValidity(),this.form.get("credentials.title")?.setValue(r.credentials?.title),this.form.get("credentials.qualifications")?.setValue(r.credentials?.qualifications),this.form.get("credentials.licences")?.setValue(r.credentials?.licences),this.form.get("credentials.company")?.setValue(r.credentials?.company),this.form.get("favorites.favExercises")?.setValue(r.favorites?.favExercises),this.form.get("favorites.favPrograms")?.setValue(r.favorites?.favPrograms)}))})}onSubmit(){if(this.isSubmitted=!0,this.form.invalid)return;const o=new FormData;Object.keys(this.userForm).map(r=>{"address"===r?Object.keys(this.userForm[r].value).map(s=>{const d=`${r}.${s}`;o.append(s,this.form.get(d)?.value)}):"credentials"===r?Object.keys(this.userForm[r].value).map(s=>{const d=`${r}.${s}`;o.append(s,this.form.get(d)?.value)}):"favorites"===r?Object.keys(this.userForm[r].value).map(s=>{const d=`${r}.${s}`;o.append(s,this.form.get(d)?.value)}):o.append(r,this.userForm[r].value)}),this.editMode?this._updateUser(o):this._createUser(o)}_createUser(o){this.usersService.createUser(o).subscribe(r=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${r.firstName} ${r.lastName} is created!`}),(0,v.O)(2e3).toPromise().then(()=>{this.location.back()})},()=>{this.messageService.add({severity:"error",summary:"error",detail:"User is not created!"})})}_updateUser(o){this.usersService.updateUser(o,this.currentUserId).subscribe(r=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${r.firstName} ${r.lastName} is updated!`}),(0,v.O)(2e3).toPromise().then(()=>{this.location.back()})},()=>{this.messageService.add({severity:"error",summary:"error",detail:"User is not updated!"})})}onCancel(){this.location.back()}get userForm(){return this.form.controls}static#e=this.\u0275fac=function(r){return new(r||a)(e.rXU(g.bg),e.rXU(t.ok),e.rXU(b.gs),e.rXU(c.aZ),e.rXU(T.nX))};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["admin-users-form"]],standalone:!0,features:[e.Jv_([g.bg]),e.aNF],decls:63,vars:10,consts:[[1,"admin-page"],["subheader","You can add or edit users here",3,"header"],[1,"grid","mb-5"],[1,"col-12"],[1,"p-toolbar-group-start"],[1,"p-toolbar-group-end"],["icon","pi pi-plus","styleClass","p-button-primary",1,"mr-2",3,"onClick","label"],["label","Cancel","icon","pi pi-arrow-circle-left","styleClass","p-button-secondary",1,"mr-2",3,"onClick"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-4"],["for","firstname"],["formControlName","firstName","id","firstname","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["class","p-error",4,"ngIf"],["for","lastname6"],["formControlName","lastName","id","lastName","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"card","flex","justify-content-start"],["formControlName","isAdmin"],["for","email"],["formControlName","email","id","email","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","password"],["formControlName","password","id","password","type","password",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"field","col-12","md:col-2"],["for","phone"],["formControlName","phone","id","phone","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["formGroupName","address",1,"formgrid","grid","col-12"],[1,"field","col-12","md:col-5"],["for","street"],["id","street","formControlName","street","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","streetNumber"],["id","streetNumber","formControlName","streetNumber","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","city"],["id","city","formControlName","city","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","zip"],["id","zip","formControlName","zipCode","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"field","col-12","md:col-3"],["formControlName","country","optionLabel","name","optionValue","name","filterBy","name","placeholder","Select a Country",3,"options","showClear","filter"],[1,"p-error"],[4,"ngIf"]],template:function(r,s){1&r&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"p-card",1)(3,"div",2)(4,"div",3)(5,"p-toolbar"),e.nrm(6,"div",4),e.j41(7,"div",5)(8,"p-button",6),e.bIt("onClick",function(){return s.onSubmit()}),e.k0s(),e.j41(9,"p-button",7),e.bIt("onClick",function(){return s.onCancel()}),e.k0s()()()()(),e.j41(10,"form",8)(11,"div",9)(12,"div",10)(13,"label",11),e.EFF(14,"Firstname"),e.k0s(),e.nrm(15,"input",12),e.DNE(16,x,2,0,"small",13),e.k0s(),e.j41(17,"div",10)(18,"label",14),e.EFF(19,"Lastname"),e.k0s(),e.nrm(20,"input",15),e.DNE(21,O,2,0,"small",13),e.k0s(),e.j41(22,"div",10)(23,"label"),e.EFF(24,"Is Admin"),e.k0s(),e.j41(25,"div",16),e.nrm(26,"p-inputSwitch",17),e.k0s()(),e.j41(27,"div",10)(28,"label",18),e.EFF(29,"Email"),e.k0s(),e.nrm(30,"input",19),e.DNE(31,j,3,2,"small",13),e.k0s(),e.j41(32,"div",10)(33,"label",20),e.EFF(34,"Password"),e.k0s(),e.nrm(35,"input",21),e.DNE(36,P,2,0,"small",13),e.k0s(),e.j41(37,"div",22)(38,"label",23),e.EFF(39,"Phone Number"),e.k0s(),e.nrm(40,"input",24),e.k0s(),e.j41(41,"div",25)(42,"div",26)(43,"label",27),e.EFF(44,"Street"),e.k0s(),e.nrm(45,"input",28),e.k0s(),e.j41(46,"div",22)(47,"label",29),e.EFF(48,"Street No"),e.k0s(),e.nrm(49,"input",30),e.k0s(),e.j41(50,"div",26)(51,"label",31),e.EFF(52,"City"),e.k0s(),e.nrm(53,"input",32),e.k0s(),e.j41(54,"div",22)(55,"label",33),e.EFF(56,"Zip Code"),e.k0s(),e.nrm(57,"input",34),e.k0s(),e.j41(58,"div",35)(59,"label",33),e.EFF(60,"Country"),e.k0s(),e.j41(61,"div",16),e.nrm(62,"p-dropdown",36),e.k0s()()()()()()()),2&r&&(e.R7$(2),e.Y8G("header",s.editMode?"Edit User":"Add User"),e.R7$(6),e.Y8G("label",s.editMode?"Update":"Create"),e.R7$(2),e.Y8G("formGroup",s.form),e.R7$(6),e.Y8G("ngIf",s.userForm.firstName.invalid&&s.isSubmitted),e.R7$(5),e.Y8G("ngIf",s.userForm.lastName.invalid&&s.isSubmitted),e.R7$(10),e.Y8G("ngIf",s.userForm.email.invalid&&s.isSubmitted),e.R7$(5),e.Y8G("ngIf",s.userForm.password.invalid&&s.isSubmitted),e.R7$(26),e.Y8G("options",s.countries)("showClear",!0)("filter",!0))},dependencies:[C.MB,C.y8,F.D,F.Z,_.m,_.M,E.$n,t.YN,t.qT,t.me,t.BC,t.cb,t.X1,t.j4,t.JD,t.$R,c.bT,p,u,k.kr,k.ms],styles:['[_nghost-%COMP%]     .p-toast{margin-top:3rem}[_nghost-%COMP%]     .custom-multiselect .p-multiselect-label{width:300px;content:""}[_nghost-%COMP%]     .p-inputgroup{width:350px;height:45px}[_nghost-%COMP%]     .customHeader .p-card-title{font-size:1rem}[_nghost-%COMP%]     .p-fieldset{background-color:#f8f9fa}[_nghost-%COMP%]     .p-fieldset-content{padding-bottom:10px}[_nghost-%COMP%]     .p-fieldset-legend{background-color:#fff}[_nghost-%COMP%]     .p-button.p-button-secondary.p-button-text, [_nghost-%COMP%]     .p-buttonset.p-button-secondary>.p-button.p-button-text, [_nghost-%COMP%]     .p-splitbutton.p-button-secondary>.p-button.p-button-text{background-color:#fff}[_nghost-%COMP%]     .image-toolbar .field{margin-right:0;margin-bottom:0}[_nghost-%COMP%]     .p-tag .p-tag-icon{margin:0}[_nghost-%COMP%]     .p-dropdown{width:280px}.category.field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.image-title[_ngcontent-%COMP%]{margin-right:.5rem}.custom-file-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:2rem}.label-button-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.image-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:1rem}.image-wrapper[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{position:absolute;top:-21px;right:-21px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.p-file-upload-button[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:none;width:119px;height:44px;line-height:1.6;padding:8px 16px;border-radius:6px;font-weight:700;cursor:pointer;display:inline-block}.p-file-upload-button[_ngcontent-%COMP%]:hover{background-color:#2563eb}.p-file-upload-button[_ngcontent-%COMP%]:active{outline:rgba(37,100,235,.7333333333) solid 1px;outline-offset:3px}@media screen and (max-width: 445px){[_nghost-%COMP%]     .p-toast{margin-left:auto;margin-right:auto;max-width:90%}}']})}return a})()},1830:(N,h,i)=>{i.d(h,{M:()=>e,m:()=>M});var c=i(177),t=i(3953),b=i(5779);const g=["*"];function v(n,m){1&n&&t.eu8(0)}function y(n,m){if(1&n&&(t.j41(0,"div",4),t.DNE(1,v,1,0,"ng-container",5),t.k0s()),2&n){const l=t.XpG();t.BMQ("data-pc-section","start"),t.R7$(),t.Y8G("ngTemplateOutlet",l.startTemplate)}}function C(n,m){1&n&&t.eu8(0)}function F(n,m){if(1&n&&(t.j41(0,"div",6),t.DNE(1,C,1,0,"ng-container",5),t.k0s()),2&n){const l=t.XpG();t.BMQ("data-pc-section","center"),t.R7$(),t.Y8G("ngTemplateOutlet",l.centerTemplate)}}function _(n,m){1&n&&t.eu8(0)}function E(n,m){if(1&n&&(t.j41(0,"div",7),t.DNE(1,_,1,0,"ng-container",5),t.k0s()),2&n){const l=t.XpG();t.BMQ("data-pc-section","end"),t.R7$(),t.Y8G("ngTemplateOutlet",l.endTemplate)}}let e=(()=>{class n{el;style;styleClass;ariaLabelledBy;templates;startTemplate;endTemplate;centerTemplate;constructor(l){this.el=l}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(l=>{switch(l.getType()){case"start":case"left":this.startTemplate=l.template;break;case"end":case"right":this.endTemplate=l.template;break;case"center":this.centerTemplate=l.template}})}static \u0275fac=function(u){return new(u||n)(t.rXU(t.aKT))};static \u0275cmp=t.VBU({type:n,selectors:[["p-toolbar"]],contentQueries:function(u,p,k){if(1&u&&t.wni(k,b.Ei,4),2&u){let T;t.mGM(T=t.lsd())&&(p.templates=T)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy"},ngContentSelectors:g,decls:5,vars:9,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left p-toolbar-group-start",4,"ngIf"],["class","p-toolbar-group-center",4,"ngIf"],["class","p-toolbar-group-right p-toolbar-group-end",4,"ngIf"],[1,"p-toolbar-group-left","p-toolbar-group-start"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-center"],[1,"p-toolbar-group-right","p-toolbar-group-end"]],template:function(u,p){1&u&&(t.NAR(),t.j41(0,"div",0),t.SdG(1),t.DNE(2,y,2,2,"div",1)(3,F,2,2,"div",2)(4,E,2,2,"div",3),t.k0s()),2&u&&(t.HbH(p.styleClass),t.Y8G("ngClass","p-toolbar p-component")("ngStyle",p.style),t.BMQ("aria-labelledby",p.ariaLabelledBy)("data-pc-name","toolbar"),t.R7$(2),t.Y8G("ngIf",p.startTemplate),t.R7$(),t.Y8G("ngIf",p.centerTemplate),t.R7$(),t.Y8G("ngIf",p.endTemplate))},dependencies:[c.YU,c.bT,c.T3,c.B3],styles:["@layer primeng{.p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-start,.p-toolbar-group-center,.p-toolbar-group-end,.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}}\n"],encapsulation:2,changeDetection:0})}return n})(),M=(()=>{class n{static \u0275fac=function(u){return new(u||n)};static \u0275mod=t.$C({type:n});static \u0275inj=t.G2t({imports:[c.MD,b.Gg,b.Gg]})}return n})()}}]);