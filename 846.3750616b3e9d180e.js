"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[846],{9846:(N,h,l)=>{l.r(h),l.d(h,{UsersFormComponent:()=>B});var e=l(3953),t=l(177),b=l(3023),d=l(9417),T=l(6100),g=l(5779),x=l(8359),v=l(1584),y=l(6467),C=l(9998),F=l(491),M=l(1830),a=l(1141),m=l(1880);const c=["input"],u=(n,f,r)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":n,"p-disabled":f,"p-focus":r}),p={provide:d.kq,useExisting:(0,e.Rfq)(()=>_),multi:!0};let _=(()=>{class n{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new e.bkB;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(r){this.cd=r}onClick(r){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:r,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(r){this.modelValue=r,this.cd.markForCheck()}registerOnChange(r){this.onModelChange=r}registerOnTouched(r){this.onModelTouched=r}setDisabledState(r){this.disabled=r,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(s){return new(s||n)(e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:n,selectors:[["p-inputSwitch"]],viewQuery:function(s,o){if(1&s&&e.GBs(c,5),2&s){let i;e.mGM(i=e.lsd())&&(o.input=i.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",e.Udg],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",e.L39],readonly:[2,"readonly","readonly",e.L39],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",e.L39]},outputs:{onChange:"onChange"},features:[e.Jv_([p]),e.GFd],decls:5,vars:23,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch","pAutoFocus","",3,"focus","blur","checked","disabled","autofocus"],[1,"p-inputswitch-slider"]],template:function(s,o){if(1&s){const i=e.RV6();e.j41(0,"div",1),e.bIt("click",function(D){return e.eBV(i),e.Njj(o.onClick(D))}),e.j41(1,"div",2)(2,"input",3,0),e.bIt("focus",function(){return e.eBV(i),e.Njj(o.onFocus())})("blur",function(){return e.eBV(i),e.Njj(o.onBlur())}),e.k0s()(),e.nrm(4,"span",4),e.k0s()}2&s&&(e.HbH(o.styleClass),e.Y8G("ngClass",e.sMw(19,u,o.checked(),o.disabled,o.focused))("ngStyle",o.style),e.BMQ("data-pc-name","inputswitch")("data-pc-section","root"),e.R7$(),e.BMQ("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("checked",o.checked())("disabled",o.disabled)("autofocus",o.autofocus),e.BMQ("id",o.inputId)("aria-checked",o.checked())("aria-labelledby",o.ariaLabelledBy)("aria-label",o.ariaLabel)("name",o.name)("tabindex",o.tabindex)("data-pc-section","hiddenInput"),e.R7$(2),e.BMQ("data-pc-section","slider"))},dependencies:[t.YU,t.B3,m.q],styles:['@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}\n'],encapsulation:2,changeDetection:0})}return n})(),k=(()=>{class n{static \u0275fac=function(s){return new(s||n)};static \u0275mod=e.$C({type:n});static \u0275inj=e.G2t({imports:[t.MD,m.u]})}return n})();var w=l(8833);function O(n,f){1&n&&(e.j41(0,"small",13),e.EFF(1,"Firstname is required"),e.k0s())}function V(n,f){1&n&&(e.j41(0,"small",13),e.EFF(1,"Lastname is required"),e.k0s())}function j(n,f){1&n&&(e.j41(0,"span"),e.EFF(1,"Email is required"),e.k0s())}function P(n,f){1&n&&(e.j41(0,"span"),e.EFF(1,"Email is invalid"),e.k0s())}function S(n,f){if(1&n&&(e.j41(0,"small",13),e.DNE(1,j,2,0,"span")(2,P,2,0,"span"),e.k0s()),2&n){const r=e.XpG();e.R7$(),e.vxM(null!=r.userForm.email.errors&&r.userForm.email.errors.required?1:-1),e.R7$(),e.vxM(null!=r.userForm.email.errors&&r.userForm.email.errors.email?2:-1)}}function U(n,f){1&n&&(e.j41(0,"small",13),e.EFF(1,"Password is required"),e.k0s())}let B=(()=>{class n{constructor(){this.messageService=(0,e.WQX)(g.bg),this.formBuilder=(0,e.WQX)(d.ok),this.usersService=(0,e.WQX)(T.gs),this.location=(0,e.WQX)(t.aZ),this.route=(0,e.WQX)(b.nX),this.subscriptions=new x.yU,this.isSubmitted=!1,this.editMode=!1}ngOnInit(){this._initForm(),this._getCountries(),this._checkEditMode()}_initForm(){this.form=this.formBuilder.group({firstName:["",d.k0.required],lastName:["",d.k0.required],password:["",d.k0.required],email:["",[d.k0.required,d.k0.email]],isAdmin:[!1],phone:["",d.k0.required],profilePicture:[""],address:this.formBuilder.group({street:[""],streetNumber:[""],city:[""],zipCode:[""],country:[""]}),credentials:this.formBuilder.group({title:[""],qualifications:[""],licences:[""],company:[""]}),favorites:this.formBuilder.group({favExercises:[""],favPrograms:[""]})})}_getCountries(){y.registerLocale(l(1038)),this.countries=Object.entries(y.getNames("en",{select:"official"})).map(r=>({id:r[0],name:r[1]})),this.countries.sort((r,s)=>r.name.localeCompare(s.name))}_checkEditMode(){const r=this.route.params.subscribe(s=>{if(s.id){this.editMode=!0,this.currentUserId=s.id;const o=this.usersService.getUser(s.id).subscribe(i=>{this.userForm.firstName.setValue(i.firstName),this.userForm.lastName.setValue(i.lastName),this.userForm.email.setValue(i.email),this.userForm.phone.setValue(i.phone),this.userForm.isAdmin.setValue(i.isAdmin),this.userForm.profilePicture.setValue(i.profilePicture),this.form.get("address.street")?.setValue(i.address?.street),this.form.get("address.streetNumber")?.setValue(i.address?.streetNumber),this.form.get("address.city")?.setValue(i.address?.city),this.form.get("address.zipCode")?.setValue(i.address?.zipCode),this.form.get("address.country")?.setValue(i.address?.country),this.userForm.password.setValidators([]),this.userForm.password.updateValueAndValidity(),this.form.get("credentials.title")?.setValue(i.credentials?.title),this.form.get("credentials.qualifications")?.setValue(i.credentials?.qualifications),this.form.get("credentials.licences")?.setValue(i.credentials?.licences),this.form.get("credentials.company")?.setValue(i.credentials?.company),this.form.get("favorites.favExercises")?.setValue(i.favorites?.favExercises),this.form.get("favorites.favPrograms")?.setValue(i.favorites?.favPrograms)});this.subscriptions.add(o)}});this.subscriptions.add(r)}onSubmit(){if(this.isSubmitted=!0,this.form.invalid)return;const r=new FormData;Object.keys(this.userForm).map(s=>{"address"===s?Object.keys(this.userForm[s].value).map(o=>{const i=`${s}.${o}`;r.append(o,this.form.get(i)?.value)}):"credentials"===s?Object.keys(this.userForm[s].value).map(o=>{const i=`${s}.${o}`;r.append(o,this.form.get(i)?.value)}):"favorites"===s?Object.keys(this.userForm[s].value).map(o=>{const i=`${s}.${o}`;r.append(o,this.form.get(i)?.value)}):r.append(s,this.userForm[s].value)}),this.editMode?this._updateUser(r):this._createUser(r)}_createUser(r){const s=this.usersService.createUser(r).subscribe(o=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${o.firstName} ${o.lastName} is created!`}),(0,v.O)(2e3).toPromise().then(()=>{this.location.back()})},()=>{this.messageService.add({severity:"error",summary:"error",detail:"User is not created!"})});this.subscriptions.add(s)}_updateUser(r){const s=this.usersService.updateUser(r,this.currentUserId).subscribe(o=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${o.firstName} ${o.lastName} is updated!`}),(0,v.O)(2e3).toPromise().then(()=>{this.location.back()})},()=>{this.messageService.add({severity:"error",summary:"error",detail:"User is not updated!"})});this.subscriptions.add(s)}onCancel(){this.location.back()}get userForm(){return this.form.controls}ngOnDestroy(){this.subscriptions.unsubscribe()}static#e=this.\u0275fac=function(s){return new(s||n)};static#t=this.\u0275cmp=e.VBU({type:n,selectors:[["admin-users-form"]],standalone:!0,features:[e.Jv_([g.bg]),e.aNF],decls:63,vars:10,consts:[[1,"admin-page"],["subheader","You can add or edit users here",3,"header"],[1,"grid","mb-5"],[1,"col-12"],[1,"p-toolbar-group-start"],[1,"p-toolbar-group-end"],["icon","pi pi-plus","styleClass","p-button-primary",1,"mr-2",3,"onClick","label"],["label","Cancel","icon","pi pi-arrow-circle-left","styleClass","p-button-secondary",1,"mr-2",3,"onClick"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-4"],["for","firstname"],["formControlName","firstName","id","firstname","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"p-error"],["for","lastname6"],["formControlName","lastName","id","lastName","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"card","flex","justify-content-start"],["formControlName","isAdmin"],["for","email"],["formControlName","email","id","email","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","password"],["formControlName","password","id","password","type","password",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"field","col-12","md:col-2"],["for","phone"],["formControlName","phone","id","phone","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["formGroupName","address",1,"formgrid","grid","col-12"],[1,"field","col-12","md:col-5"],["for","street"],["id","street","formControlName","street","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","streetNumber"],["id","streetNumber","formControlName","streetNumber","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","city"],["id","city","formControlName","city","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","zip"],["id","zip","formControlName","zipCode","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"field","col-12","md:col-3"],["formControlName","country","optionLabel","name","optionValue","name","filterBy","name","placeholder","Select a Country",3,"options","showClear","filter"]],template:function(s,o){1&s&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"p-card",1)(3,"div",2)(4,"div",3)(5,"p-toolbar"),e.nrm(6,"div",4),e.j41(7,"div",5)(8,"p-button",6),e.bIt("onClick",function(){return o.onSubmit()}),e.k0s(),e.j41(9,"p-button",7),e.bIt("onClick",function(){return o.onCancel()}),e.k0s()()()()(),e.j41(10,"form",8)(11,"div",9)(12,"div",10)(13,"label",11),e.EFF(14,"Firstname"),e.k0s(),e.nrm(15,"input",12),e.DNE(16,O,2,0,"small",13),e.k0s(),e.j41(17,"div",10)(18,"label",14),e.EFF(19,"Lastname"),e.k0s(),e.nrm(20,"input",15),e.DNE(21,V,2,0,"small",13),e.k0s(),e.j41(22,"div",10)(23,"label"),e.EFF(24,"Is Admin"),e.k0s(),e.j41(25,"div",16),e.nrm(26,"p-inputSwitch",17),e.k0s()(),e.j41(27,"div",10)(28,"label",18),e.EFF(29,"Email"),e.k0s(),e.nrm(30,"input",19),e.DNE(31,S,3,2,"small",13),e.k0s(),e.j41(32,"div",10)(33,"label",20),e.EFF(34,"Password"),e.k0s(),e.nrm(35,"input",21),e.DNE(36,U,2,0,"small",13),e.k0s(),e.j41(37,"div",22)(38,"label",23),e.EFF(39,"Phone Number"),e.k0s(),e.nrm(40,"input",24),e.k0s(),e.j41(41,"div",25)(42,"div",26)(43,"label",27),e.EFF(44,"Street"),e.k0s(),e.nrm(45,"input",28),e.k0s(),e.j41(46,"div",22)(47,"label",29),e.EFF(48,"Street No"),e.k0s(),e.nrm(49,"input",30),e.k0s(),e.j41(50,"div",26)(51,"label",31),e.EFF(52,"City"),e.k0s(),e.nrm(53,"input",32),e.k0s(),e.j41(54,"div",22)(55,"label",33),e.EFF(56,"Zip Code"),e.k0s(),e.nrm(57,"input",34),e.k0s(),e.j41(58,"div",35)(59,"label",33),e.EFF(60,"Country"),e.k0s(),e.j41(61,"div",16),e.nrm(62,"p-dropdown",36),e.k0s()()()()()()()),2&s&&(e.R7$(2),e.Y8G("header",o.editMode?"Edit User":"Add User"),e.R7$(6),e.Y8G("label",o.editMode?"Update":"Create"),e.R7$(2),e.Y8G("formGroup",o.form),e.R7$(6),e.vxM(o.userForm.firstName.invalid&&o.isSubmitted?16:-1),e.R7$(5),e.vxM(o.userForm.lastName.invalid&&o.isSubmitted?21:-1),e.R7$(10),e.vxM(o.userForm.email.invalid&&o.isSubmitted?31:-1),e.R7$(5),e.vxM(o.userForm.password.invalid&&o.isSubmitted?36:-1),e.R7$(26),e.Y8G("options",o.countries)("showClear",!0)("filter",!0))},dependencies:[C.MB,C.y8,F.D,F.Z,M.m,M.M,a.$n,d.YN,d.qT,d.me,d.BC,d.cb,d.X1,d.j4,d.JD,d.$R,k,_,w.kr,w.ms],styles:['[_nghost-%COMP%]     .p-toast{margin-top:3rem}[_nghost-%COMP%]     .custom-multiselect .p-multiselect-label{width:300px;content:""}[_nghost-%COMP%]     .p-inputgroup{width:350px;height:45px}[_nghost-%COMP%]     .customHeader .p-card-title{font-size:1rem}[_nghost-%COMP%]     .p-fieldset{background-color:#f8f9fa}[_nghost-%COMP%]     .p-fieldset-content{padding-bottom:10px}[_nghost-%COMP%]     .p-fieldset-legend{background-color:#fff}[_nghost-%COMP%]     .p-button.p-button-secondary.p-button-text, [_nghost-%COMP%]     .p-buttonset.p-button-secondary>.p-button.p-button-text, [_nghost-%COMP%]     .p-splitbutton.p-button-secondary>.p-button.p-button-text{background-color:#fff}[_nghost-%COMP%]     .image-toolbar .field{margin-right:0;margin-bottom:0}[_nghost-%COMP%]     .p-tag .p-tag-icon{margin:0}[_nghost-%COMP%]     .p-dropdown{width:280px}.category.field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.image-title[_ngcontent-%COMP%]{margin-right:.5rem}.custom-file-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:2rem}.label-button-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.image-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:1rem}.image-wrapper[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{position:absolute;top:-21px;right:-21px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.p-file-upload-button[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:none;width:119px;height:44px;line-height:1.6;padding:8px 16px;border-radius:6px;font-weight:700;cursor:pointer;display:inline-block}.p-file-upload-button[_ngcontent-%COMP%]:hover{background-color:#2563eb}.p-file-upload-button[_ngcontent-%COMP%]:active{outline:rgba(37,100,235,.7333333333) solid 1px;outline-offset:3px}@media screen and (max-width: 445px){[_nghost-%COMP%]     .p-toast{margin-left:auto;margin-right:auto;max-width:90%}}']})}return n})()},1830:(N,h,l)=>{l.d(h,{M:()=>F,m:()=>M});var e=l(177),t=l(3953),b=l(5779);const d=["*"];function T(a,m){1&a&&t.eu8(0)}function g(a,m){if(1&a&&(t.j41(0,"div",4),t.DNE(1,T,1,0,"ng-container",5),t.k0s()),2&a){const c=t.XpG();t.BMQ("data-pc-section","start"),t.R7$(),t.Y8G("ngTemplateOutlet",c.startTemplate)}}function x(a,m){1&a&&t.eu8(0)}function v(a,m){if(1&a&&(t.j41(0,"div",6),t.DNE(1,x,1,0,"ng-container",5),t.k0s()),2&a){const c=t.XpG();t.BMQ("data-pc-section","center"),t.R7$(),t.Y8G("ngTemplateOutlet",c.centerTemplate)}}function y(a,m){1&a&&t.eu8(0)}function C(a,m){if(1&a&&(t.j41(0,"div",7),t.DNE(1,y,1,0,"ng-container",5),t.k0s()),2&a){const c=t.XpG();t.BMQ("data-pc-section","end"),t.R7$(),t.Y8G("ngTemplateOutlet",c.endTemplate)}}let F=(()=>{class a{el;style;styleClass;ariaLabelledBy;templates;startTemplate;endTemplate;centerTemplate;constructor(c){this.el=c}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(c=>{switch(c.getType()){case"start":case"left":this.startTemplate=c.template;break;case"end":case"right":this.endTemplate=c.template;break;case"center":this.centerTemplate=c.template}})}static \u0275fac=function(u){return new(u||a)(t.rXU(t.aKT))};static \u0275cmp=t.VBU({type:a,selectors:[["p-toolbar"]],contentQueries:function(u,p,_){if(1&u&&t.wni(_,b.Ei,4),2&u){let k;t.mGM(k=t.lsd())&&(p.templates=k)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy"},ngContentSelectors:d,decls:5,vars:9,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left p-toolbar-group-start",4,"ngIf"],["class","p-toolbar-group-center",4,"ngIf"],["class","p-toolbar-group-right p-toolbar-group-end",4,"ngIf"],[1,"p-toolbar-group-left","p-toolbar-group-start"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-center"],[1,"p-toolbar-group-right","p-toolbar-group-end"]],template:function(u,p){1&u&&(t.NAR(),t.j41(0,"div",0),t.SdG(1),t.DNE(2,g,2,2,"div",1)(3,v,2,2,"div",2)(4,C,2,2,"div",3),t.k0s()),2&u&&(t.HbH(p.styleClass),t.Y8G("ngClass","p-toolbar p-component")("ngStyle",p.style),t.BMQ("aria-labelledby",p.ariaLabelledBy)("data-pc-name","toolbar"),t.R7$(2),t.Y8G("ngIf",p.startTemplate),t.R7$(),t.Y8G("ngIf",p.centerTemplate),t.R7$(),t.Y8G("ngIf",p.endTemplate))},dependencies:[e.YU,e.bT,e.T3,e.B3],styles:["@layer primeng{.p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-start,.p-toolbar-group-center,.p-toolbar-group-end,.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}}\n"],encapsulation:2,changeDetection:0})}return a})(),M=(()=>{class a{static \u0275fac=function(u){return new(u||a)};static \u0275mod=t.$C({type:a});static \u0275inj=t.G2t({imports:[e.MD,b.Gg,b.Gg]})}return a})()}}]);