"use strict";(self.webpackChunkadmin=self.webpackChunkadmin||[]).push([[846],{9846:(E,g,n)=>{n.r(g),n.d(g,{UsersFormComponent:()=>B});var e=n(3953),o=n(177),b=n(3023),l=n(9417),k=n(6100),v=n(5779),y=n(1584),C=n(6467),F=n(9998),M=n(491),_=n(1830),T=n(1141),i=n(1880);const m=["input"],d=(a,f,r)=>({"p-inputswitch p-component":!0,"p-inputswitch-checked":a,"p-disabled":f,"p-focus":r}),c={provide:l.kq,useExisting:(0,e.Rfq)(()=>p),multi:!0};let p=(()=>{class a{cd;style;styleClass;tabindex;inputId;name;disabled;readonly;trueValue=!0;falseValue=!1;ariaLabel;ariaLabelledBy;autofocus;onChange=new e.bkB;input;modelValue=!1;focused=!1;onModelChange=()=>{};onModelTouched=()=>{};constructor(r){this.cd=r}onClick(r){!this.disabled&&!this.readonly&&(this.modelValue=this.checked()?this.falseValue:this.trueValue,this.onModelChange(this.modelValue),this.onChange.emit({originalEvent:r,checked:this.modelValue}),this.input.nativeElement.focus())}onFocus(){this.focused=!0}onBlur(){this.focused=!1,this.onModelTouched()}writeValue(r){this.modelValue=r,this.cd.markForCheck()}registerOnChange(r){this.onModelChange=r}registerOnTouched(r){this.onModelTouched=r}setDisabledState(r){this.disabled=r,this.cd.markForCheck()}checked(){return this.modelValue===this.trueValue}static \u0275fac=function(t){return new(t||a)(e.rXU(e.gRc))};static \u0275cmp=e.VBU({type:a,selectors:[["p-inputSwitch"]],viewQuery:function(t,s){if(1&t&&e.GBs(m,5),2&t){let u;e.mGM(u=e.lsd())&&(s.input=u.first)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",tabindex:[2,"tabindex","tabindex",e.Udg],inputId:"inputId",name:"name",disabled:[2,"disabled","disabled",e.L39],readonly:[2,"readonly","readonly",e.L39],trueValue:"trueValue",falseValue:"falseValue",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",autofocus:[2,"autofocus","autofocus",e.L39]},outputs:{onChange:"onChange"},features:[e.Jv_([c]),e.GFd],decls:5,vars:23,consts:[["input",""],[3,"click","ngClass","ngStyle"],[1,"p-hidden-accessible"],["type","checkbox","role","switch","pAutoFocus","",3,"focus","blur","checked","disabled","autofocus"],[1,"p-inputswitch-slider"]],template:function(t,s){if(1&t){const u=e.RV6();e.j41(0,"div",1),e.bIt("click",function(U){return e.eBV(u),e.Njj(s.onClick(U))}),e.j41(1,"div",2)(2,"input",3,0),e.bIt("focus",function(){return e.eBV(u),e.Njj(s.onFocus())})("blur",function(){return e.eBV(u),e.Njj(s.onBlur())}),e.k0s()(),e.nrm(4,"span",4),e.k0s()}2&t&&(e.HbH(s.styleClass),e.Y8G("ngClass",e.sMw(19,d,s.checked(),s.disabled,s.focused))("ngStyle",s.style),e.BMQ("data-pc-name","inputswitch")("data-pc-section","root"),e.R7$(),e.BMQ("data-pc-section","hiddenInputWrapper")("data-p-hidden-accessible",!0),e.R7$(),e.Y8G("checked",s.checked())("disabled",s.disabled)("autofocus",s.autofocus),e.BMQ("id",s.inputId)("aria-checked",s.checked())("aria-labelledby",s.ariaLabelledBy)("aria-label",s.ariaLabel)("name",s.name)("tabindex",s.tabindex)("data-pc-section","hiddenInput"),e.R7$(2),e.BMQ("data-pc-section","slider"))},dependencies:[o.YU,o.B3,i.q],styles:['@layer primeng{.p-inputswitch{position:relative;display:inline-block;-webkit-user-select:none;user-select:none}.p-inputswitch-slider{position:absolute;cursor:pointer;inset:0;border:1px solid transparent}.p-inputswitch-slider:before{position:absolute;content:"";top:50%}}\n'],encapsulation:2,changeDetection:0})}return a})(),x=(()=>{class a{static \u0275fac=function(t){return new(t||a)};static \u0275mod=e.$C({type:a});static \u0275inj=e.G2t({imports:[o.MD,i.u]})}return a})();var h=n(8833);function N(a,f){1&a&&(e.j41(0,"small",13),e.EFF(1,"Firstname is required"),e.k0s())}function O(a,f){1&a&&(e.j41(0,"small",13),e.EFF(1,"Lastname is required"),e.k0s())}function V(a,f){1&a&&(e.j41(0,"span"),e.EFF(1,"Email is required"),e.k0s())}function j(a,f){1&a&&(e.j41(0,"span"),e.EFF(1,"Email is invalid"),e.k0s())}function P(a,f){if(1&a&&(e.j41(0,"small",13),e.DNE(1,V,2,0,"span")(2,j,2,0,"span"),e.k0s()),2&a){const r=e.XpG();e.R7$(),e.vxM(null!=r.userForm.email.errors&&r.userForm.email.errors.required?1:-1),e.R7$(),e.vxM(null!=r.userForm.email.errors&&r.userForm.email.errors.email?2:-1)}}function S(a,f){1&a&&(e.j41(0,"small",13),e.EFF(1,"Password is required"),e.k0s())}let B=(()=>{class a{constructor(){this.messageService=(0,e.WQX)(v.bg),this.formBuilder=(0,e.WQX)(l.ok),this.usersService=(0,e.WQX)(k.gs),this.location=(0,e.WQX)(o.aZ),this.route=(0,e.WQX)(b.nX),this.isSubmitted=!1,this.editMode=!1}ngOnInit(){this._initForm(),this._getCountries(),this._checkEditMode()}_initForm(){this.form=this.formBuilder.group({firstName:["",l.k0.required],lastName:["",l.k0.required],password:["",l.k0.required],email:["",[l.k0.required,l.k0.email]],isAdmin:[!1],phone:["",l.k0.required],profilePicture:[""],address:this.formBuilder.group({street:[""],streetNumber:[""],city:[""],zipCode:[""],country:[""]}),credentials:this.formBuilder.group({title:[""],qualifications:[""],licences:[""],company:[""]}),favorites:this.formBuilder.group({favExercises:[""],favPrograms:[""]})})}_getCountries(){C.registerLocale(n(1038)),this.countries=Object.entries(C.getNames("en",{select:"official"})).map(r=>({id:r[0],name:r[1]})),this.countries.sort((r,t)=>r.name.localeCompare(t.name))}_checkEditMode(){this.route.params.subscribe(r=>{r.id&&(this.editMode=!0,this.currentUserId=r.id,this.usersService.getUser(r.id).subscribe(t=>{this.userForm.firstName.setValue(t.firstName),this.userForm.lastName.setValue(t.lastName),this.userForm.email.setValue(t.email),this.userForm.phone.setValue(t.phone),this.userForm.isAdmin.setValue(t.isAdmin),this.userForm.profilePicture.setValue(t.profilePicture),this.form.get("address.street")?.setValue(t.address?.street),this.form.get("address.streetNumber")?.setValue(t.address?.streetNumber),this.form.get("address.city")?.setValue(t.address?.city),this.form.get("address.zipCode")?.setValue(t.address?.zipCode),this.form.get("address.country")?.setValue(t.address?.country),this.userForm.password.setValidators([]),this.userForm.password.updateValueAndValidity(),this.form.get("credentials.title")?.setValue(t.credentials?.title),this.form.get("credentials.qualifications")?.setValue(t.credentials?.qualifications),this.form.get("credentials.licences")?.setValue(t.credentials?.licences),this.form.get("credentials.company")?.setValue(t.credentials?.company),this.form.get("favorites.favExercises")?.setValue(t.favorites?.favExercises),this.form.get("favorites.favPrograms")?.setValue(t.favorites?.favPrograms)}))})}onSubmit(){if(this.isSubmitted=!0,this.form.invalid)return;const r=new FormData;Object.keys(this.userForm).map(t=>{"address"===t?Object.keys(this.userForm[t].value).map(s=>{const u=`${t}.${s}`;r.append(s,this.form.get(u)?.value)}):"credentials"===t?Object.keys(this.userForm[t].value).map(s=>{const u=`${t}.${s}`;r.append(s,this.form.get(u)?.value)}):"favorites"===t?Object.keys(this.userForm[t].value).map(s=>{const u=`${t}.${s}`;r.append(s,this.form.get(u)?.value)}):r.append(t,this.userForm[t].value)}),this.editMode?this._updateUser(r):this._createUser(r)}_createUser(r){this.usersService.createUser(r).subscribe(t=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${t.firstName} ${t.lastName} is created!`}),(0,y.O)(2e3).toPromise().then(()=>{this.location.back()})},()=>{this.messageService.add({severity:"error",summary:"error",detail:"User is not created!"})})}_updateUser(r){this.usersService.updateUser(r,this.currentUserId).subscribe(t=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${t.firstName} ${t.lastName} is updated!`}),(0,y.O)(2e3).toPromise().then(()=>{this.location.back()})},()=>{this.messageService.add({severity:"error",summary:"error",detail:"User is not updated!"})})}onCancel(){this.location.back()}get userForm(){return this.form.controls}static#e=this.\u0275fac=function(t){return new(t||a)};static#t=this.\u0275cmp=e.VBU({type:a,selectors:[["admin-users-form"]],standalone:!0,features:[e.Jv_([v.bg]),e.aNF],decls:63,vars:10,consts:[[1,"admin-page"],["subheader","You can add or edit users here",3,"header"],[1,"grid","mb-5"],[1,"col-12"],[1,"p-toolbar-group-start"],[1,"p-toolbar-group-end"],["icon","pi pi-plus","styleClass","p-button-primary",1,"mr-2",3,"onClick","label"],["label","Cancel","icon","pi pi-arrow-circle-left","styleClass","p-button-secondary",1,"mr-2",3,"onClick"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col-12","md:col-4"],["for","firstname"],["formControlName","firstName","id","firstname","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"p-error"],["for","lastname6"],["formControlName","lastName","id","lastName","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"card","flex","justify-content-start"],["formControlName","isAdmin"],["for","email"],["formControlName","email","id","email","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","password"],["formControlName","password","id","password","type","password",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"field","col-12","md:col-2"],["for","phone"],["formControlName","phone","id","phone","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["formGroupName","address",1,"formgrid","grid","col-12"],[1,"field","col-12","md:col-5"],["for","street"],["id","street","formControlName","street","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","streetNumber"],["id","streetNumber","formControlName","streetNumber","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","city"],["id","city","formControlName","city","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],["for","zip"],["id","zip","formControlName","zipCode","type","text",1,"text-base","text-color","surface-overlay","p-2","border-1","border-solid","surface-border","border-round","appearance-none","outline-none","focus:border-primary","w-full"],[1,"field","col-12","md:col-3"],["formControlName","country","optionLabel","name","optionValue","name","filterBy","name","placeholder","Select a Country",3,"options","showClear","filter"]],template:function(t,s){1&t&&(e.nrm(0,"p-toast"),e.j41(1,"div",0)(2,"p-card",1)(3,"div",2)(4,"div",3)(5,"p-toolbar"),e.nrm(6,"div",4),e.j41(7,"div",5)(8,"p-button",6),e.bIt("onClick",function(){return s.onSubmit()}),e.k0s(),e.j41(9,"p-button",7),e.bIt("onClick",function(){return s.onCancel()}),e.k0s()()()()(),e.j41(10,"form",8)(11,"div",9)(12,"div",10)(13,"label",11),e.EFF(14,"Firstname"),e.k0s(),e.nrm(15,"input",12),e.DNE(16,N,2,0,"small",13),e.k0s(),e.j41(17,"div",10)(18,"label",14),e.EFF(19,"Lastname"),e.k0s(),e.nrm(20,"input",15),e.DNE(21,O,2,0,"small",13),e.k0s(),e.j41(22,"div",10)(23,"label"),e.EFF(24,"Is Admin"),e.k0s(),e.j41(25,"div",16),e.nrm(26,"p-inputSwitch",17),e.k0s()(),e.j41(27,"div",10)(28,"label",18),e.EFF(29,"Email"),e.k0s(),e.nrm(30,"input",19),e.DNE(31,P,3,2,"small",13),e.k0s(),e.j41(32,"div",10)(33,"label",20),e.EFF(34,"Password"),e.k0s(),e.nrm(35,"input",21),e.DNE(36,S,2,0,"small",13),e.k0s(),e.j41(37,"div",22)(38,"label",23),e.EFF(39,"Phone Number"),e.k0s(),e.nrm(40,"input",24),e.k0s(),e.j41(41,"div",25)(42,"div",26)(43,"label",27),e.EFF(44,"Street"),e.k0s(),e.nrm(45,"input",28),e.k0s(),e.j41(46,"div",22)(47,"label",29),e.EFF(48,"Street No"),e.k0s(),e.nrm(49,"input",30),e.k0s(),e.j41(50,"div",26)(51,"label",31),e.EFF(52,"City"),e.k0s(),e.nrm(53,"input",32),e.k0s(),e.j41(54,"div",22)(55,"label",33),e.EFF(56,"Zip Code"),e.k0s(),e.nrm(57,"input",34),e.k0s(),e.j41(58,"div",35)(59,"label",33),e.EFF(60,"Country"),e.k0s(),e.j41(61,"div",16),e.nrm(62,"p-dropdown",36),e.k0s()()()()()()()),2&t&&(e.R7$(2),e.Y8G("header",s.editMode?"Edit User":"Add User"),e.R7$(6),e.Y8G("label",s.editMode?"Update":"Create"),e.R7$(2),e.Y8G("formGroup",s.form),e.R7$(6),e.vxM(s.userForm.firstName.invalid&&s.isSubmitted?16:-1),e.R7$(5),e.vxM(s.userForm.lastName.invalid&&s.isSubmitted?21:-1),e.R7$(10),e.vxM(s.userForm.email.invalid&&s.isSubmitted?31:-1),e.R7$(5),e.vxM(s.userForm.password.invalid&&s.isSubmitted?36:-1),e.R7$(26),e.Y8G("options",s.countries)("showClear",!0)("filter",!0))},dependencies:[F.MB,F.y8,M.D,M.Z,_.m,_.M,T.$n,l.YN,l.qT,l.me,l.BC,l.cb,l.X1,l.j4,l.JD,l.$R,x,p,h.kr,h.ms],styles:['[_nghost-%COMP%]     .p-toast{margin-top:3rem}[_nghost-%COMP%]     .custom-multiselect .p-multiselect-label{width:300px;content:""}[_nghost-%COMP%]     .p-inputgroup{width:350px;height:45px}[_nghost-%COMP%]     .customHeader .p-card-title{font-size:1rem}[_nghost-%COMP%]     .p-fieldset{background-color:#f8f9fa}[_nghost-%COMP%]     .p-fieldset-content{padding-bottom:10px}[_nghost-%COMP%]     .p-fieldset-legend{background-color:#fff}[_nghost-%COMP%]     .p-button.p-button-secondary.p-button-text, [_nghost-%COMP%]     .p-buttonset.p-button-secondary>.p-button.p-button-text, [_nghost-%COMP%]     .p-splitbutton.p-button-secondary>.p-button.p-button-text{background-color:#fff}[_nghost-%COMP%]     .image-toolbar .field{margin-right:0;margin-bottom:0}[_nghost-%COMP%]     .p-tag .p-tag-icon{margin:0}[_nghost-%COMP%]     .p-dropdown{width:280px}.category.field[_ngcontent-%COMP%]{display:flex;flex-direction:column}.image-title[_ngcontent-%COMP%]{margin-right:.5rem}.custom-file-upload[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:2rem}.label-button-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.image-wrapper[_ngcontent-%COMP%]{position:relative;margin-top:1rem}.image-wrapper[_ngcontent-%COMP%]   p-button[_ngcontent-%COMP%]{position:absolute;top:-21px;right:-21px}.custom-file-upload[_ngcontent-%COMP%]   input[type=file][_ngcontent-%COMP%]{display:none}.p-file-upload-button[_ngcontent-%COMP%]{background-color:#3b82f6;color:#fff;border:none;width:119px;height:44px;line-height:1.6;padding:8px 16px;border-radius:6px;font-weight:700;cursor:pointer;display:inline-block}.p-file-upload-button[_ngcontent-%COMP%]:hover{background-color:#2563eb}.p-file-upload-button[_ngcontent-%COMP%]:active{outline:rgba(37,100,235,.7333333333) solid 1px;outline-offset:3px}@media screen and (max-width: 445px){[_nghost-%COMP%]     .p-toast{margin-left:auto;margin-right:auto;max-width:90%}}']})}return a})()},1830:(E,g,n)=>{n.d(g,{M:()=>_,m:()=>T});var e=n(177),o=n(3953),b=n(5779);const l=["*"];function k(i,m){1&i&&o.eu8(0)}function v(i,m){if(1&i&&(o.j41(0,"div",4),o.DNE(1,k,1,0,"ng-container",5),o.k0s()),2&i){const d=o.XpG();o.BMQ("data-pc-section","start"),o.R7$(),o.Y8G("ngTemplateOutlet",d.startTemplate)}}function y(i,m){1&i&&o.eu8(0)}function C(i,m){if(1&i&&(o.j41(0,"div",6),o.DNE(1,y,1,0,"ng-container",5),o.k0s()),2&i){const d=o.XpG();o.BMQ("data-pc-section","center"),o.R7$(),o.Y8G("ngTemplateOutlet",d.centerTemplate)}}function F(i,m){1&i&&o.eu8(0)}function M(i,m){if(1&i&&(o.j41(0,"div",7),o.DNE(1,F,1,0,"ng-container",5),o.k0s()),2&i){const d=o.XpG();o.BMQ("data-pc-section","end"),o.R7$(),o.Y8G("ngTemplateOutlet",d.endTemplate)}}let _=(()=>{class i{el;style;styleClass;ariaLabelledBy;templates;startTemplate;endTemplate;centerTemplate;constructor(d){this.el=d}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(d=>{switch(d.getType()){case"start":case"left":this.startTemplate=d.template;break;case"end":case"right":this.endTemplate=d.template;break;case"center":this.centerTemplate=d.template}})}static \u0275fac=function(c){return new(c||i)(o.rXU(o.aKT))};static \u0275cmp=o.VBU({type:i,selectors:[["p-toolbar"]],contentQueries:function(c,p,x){if(1&c&&o.wni(x,b.Ei,4),2&c){let h;o.mGM(h=o.lsd())&&(p.templates=h)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass",ariaLabelledBy:"ariaLabelledBy"},ngContentSelectors:l,decls:5,vars:9,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left p-toolbar-group-start",4,"ngIf"],["class","p-toolbar-group-center",4,"ngIf"],["class","p-toolbar-group-right p-toolbar-group-end",4,"ngIf"],[1,"p-toolbar-group-left","p-toolbar-group-start"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-center"],[1,"p-toolbar-group-right","p-toolbar-group-end"]],template:function(c,p){1&c&&(o.NAR(),o.j41(0,"div",0),o.SdG(1),o.DNE(2,v,2,2,"div",1)(3,C,2,2,"div",2)(4,M,2,2,"div",3),o.k0s()),2&c&&(o.HbH(p.styleClass),o.Y8G("ngClass","p-toolbar p-component")("ngStyle",p.style),o.BMQ("aria-labelledby",p.ariaLabelledBy)("data-pc-name","toolbar"),o.R7$(2),o.Y8G("ngIf",p.startTemplate),o.R7$(),o.Y8G("ngIf",p.centerTemplate),o.R7$(),o.Y8G("ngIf",p.endTemplate))},dependencies:[e.YU,e.bT,e.T3,e.B3],styles:["@layer primeng{.p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-start,.p-toolbar-group-center,.p-toolbar-group-end,.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}}\n"],encapsulation:2,changeDetection:0})}return i})(),T=(()=>{class i{static \u0275fac=function(c){return new(c||i)};static \u0275mod=o.$C({type:i});static \u0275inj=o.G2t({imports:[e.MD,b.Gg,b.Gg]})}return i})()}}]);